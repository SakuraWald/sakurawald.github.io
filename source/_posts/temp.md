---
title: Combinatorics -  Catalan Number
tags: []
id: '28540'
categories:
  - - uncategorized
date: 2022-03-26 11:49:06
---

# \[Counting\] Catalan Number

## Definition

Catalan数是定义如下的数列

其中将 n 替换为 `n - 1`可得到

该式 C\_{n-1} 的含义是: `具有 n + 1 条边的凸多边形`被其`内部不相交的对角线`所`划分出的三角形区域的方法数` h\_n

其中

## Theorem

### Theorem 1 (The Number of Acceptable Sequence)

#### Content

考虑由`n个+1`和`n个-1`构成的`2n项序列`a\_n

则`该序列的部分和满足下列条件`

`的序列的个数`等于`第n个Catalan数`

#### Proof

定义满足下列条件的序列为`可接受序列 (Acceptable Sequence)`

否则，将序列称为`不可接受序列 (Unacceptable Sequence)`

* * *

由`n个+1`和`n个-1` `所构成的2n项序列`a\_n 的个数 T\_n 满足

设：由`n个+1`和`n个-1` `所构成的2n项序列`a\_n 中的`可接受序列`的个数为A\_n

同样地，设`其中的不可接受序列`的个数为U\_n

故

因此，只需求出 U\_n 即可求出 A\_n

* * *

假设 a\_k 是`序列中第一个导致形成不可接受序列的元素`，即

则我们可以知道`前k-1个元素`中，`-1元素`和`+1元素`的个数相等。即

因此，我们可以得到`不可接受序列的结构`：`前k-1个元素中有相等数量的-1元素和+1元素`，而`第k个元素是-1元素`。

* * *

现在，我们将`前k项中的每一项的符号进行反转`：即对 i = 1, 2, 3, ... , k 我们使用 \-a\_i 来代替 a\_i

得到变化后的序列

我们得到的`新序列`包含`n+1个+1`和`n-1个-1`共`2n项`，

该`数列`是通过对`原数列`的`前k个元素进行符号反转`而得到的，而由于`该序列`的`+1元素`比`-1元素`多`1个`（在`反转符号`之前，`原序列`的`+1元素`和`-1元素`的个数相等均为n），所以该序列必定是`不可接受序列`。

为了得到`不可接受序列`的个数，我们需要做的仅仅是`考虑如何排列`这`n+1个+1元素`和`n-1个-1元素`

因此我们得到，`不可接受序列`的个数等同于：由`n+1个+1元素`和`n-1个-1元素`所组成的`2n项的数列`的个数。即

> 注：我们并不关心k究竟取什么值，而仅仅是关心这样一个结构：前k-1个元素中+1元素和-1元素的个数相等，且第k个元素的值为-1

> 注：我们对于k的定义为：a\_k 是使得 数列的部分和S\_k ＜0的第一个元素。
> 
> 在U\_n 的计算公式中，我们也并不关心k究竟在哪里。而仅仅关心如何排列 n+1个+1元素和n-1个-1元素，这是因为，我们可以通过所形成的排列，再根据k的定义，倒推出k所应处的位置。

* * *

综上，

Q.E.D

#### Example

##### Example 1

###### Description

一位律师在他所`居住`的所有`以北n个街区`和`以东n个街区`的地方`工作`。每天他要走`2n个街区`去`工作`。

如果他从来`不穿越（但可以接触）` `从家到工作场所的对角线`，则`有多少条可能的路线`？

![image-20220326163649380](https://s2.loli.net/2022/03/26/tWw1VcEi4aBkUmx.png)

> 注：上图中n=4，律师从src到dst总共走2n个街区

###### Analysis

`律师`从`起点`出发到达`终点`总共需要走`n个水平步`和`n个垂直步`。

所以，`从src到dst的总路线数量` T\_n 应为

但是，这并不是该问题的最终解。因为该问题还需要满足约束：不能`越过对角线`。

* * *

我们设`向北走为+1元素`，`向东走为-1元素`。于是`每一条路线`都可以构成`一个序列` a\_n

`一条合法的路线`应满足

该模型符合`Catanlan数`，即`合法路线的数量`\=`可接受序列的数量`

因此，`位于对角线上方的路线的数量` = `位于对角线下方的路线的数量` = Catalan(n)

综上，`所有合法的路线的数量` = 2 \* Catalan(n)

## Extension

### Pseudo-Catalan Number

#### Definiton

在Catalan数的基础上，我们定义Pseudo-Catalan如下：

#### Example

##### Example 1

###### Description

设a\_1, a\_2, \\dots, a\_n为n个数。`运算方案`是指按照a\_1, a\_2, \\dots, a\_n的顺序进行`抽象运算`的方案。

设 h\_n 表示`n个数的抽象运算方案的数目`。

> 注：该抽象运算为二元运算，且不支持交换律。

例：h\_2 = 2即或(a\_1 \* a\_2) 或 (a\_2 \* a\_1)

###### Analysis

尝试对h\_n采用归纳法得出递推关系。

首先考虑简单情况，h\_1=1，h\_2 = 2。

接下来，考虑h\_3

h\_3的情况可以`视为`在h\_2的基础上，`再将一个元素插入到合适的位置进行抽象运算`

可知：的所有抽象运算方案和h\_2的所有抽象运算方案: (a\_1 \* a\_2) 和 (a\_2 \* a\_1)

不妨考虑在`h_2的其中1个抽象运算方案` (a\_1 \* a\_2)的基础上，`插入元素`a\_3

a\_3可以`与a1括起来`或者`与a2括起来`，所以a\_3可以`选择与2个元素中的其中1个先进行运算`。

而在`选定好先进行运算的元素后`，a\_3还可以`选择是与该元素左运算或右运算`。

因此，我们可以列出总共的2 \* 2 = 4 种抽象运算方案：

((a\_3 \* a\_1) \* a\_2)

((a\_1 \* a\_3) \* a\_2)

(a\_1 \* (a\_3 \* a\_2))

(a\_1 \* (a\_2 \* a\_3))

但以上的方案并没有考虑完全，a\_3也可以`选择独自参与运算`，即还有2种方案应当被考虑：

a\_3 \* (a\_1 \* a\_2)

(a\_1 \* a\_2) \* a\_3

综上，h\_3 = 2\*2 \* (3-2) + 2 = 6

> 注：因为我们计算的是a\_3，而a\_3是基于a\_2的基础的。对于a\_2来说，总共2个元素，共有2-1=1次抽象运算（同理2-1=1个括号）

> 对于h\_n，可以理解为先选择n个数的排列方式，然后再插入(n-1)对括号。

综上

由于h\_{n-1}的`每一种乘法方案`均可以给出4n-6个`新的方案`

故，我们将h\_n拓展为

Q.E.D

##### Example 2

###### Description

如果在Example 2的例子中，我们只计数按照a\_1, a\_2, a\_3, ..., a\_n的顺序排列的`抽象运算方案数` g\_n

###### Analysis

也就是说，对于比Example 1中`计数所有的排列顺序的抽象运算方案数`，在这里我们`仅计算这1种排列顺序的抽象运算方案数`。

即可知

也就是说：`n个元素按固定顺序排列的抽象运算的方案数`g\_n = C\_{n-1}

Q.E.D

* * *

此外，我们也可以根据g\_n的`定义`来导出它的`递推关系`。

在a\_1,a\_2,a\_3,\\dots,a\_n的`每一个抽象运算方案中`，总是存在`最后一次的抽象运算运算`，它`对应着最外面的括号`。

即：

的抽象运算方案的抽象运算方案

故，我们有g\_k种方案来选择a\_1,a\_2,\\dots,a\_k的抽象运算方案，有g\_{n-k}种方案来选择a\_{k+1}, a\_{k+2},\\dots,a\_n的抽象运算方案。并且，我们有1 \\le k \\le n-1

综上：

又有

即

我们使用n+1来代替n

结论：

g\_n的含义：

1.  将`有n+1条边的凸多边形`利用`插入在不相交的对角线`来`划分为三角形区域`的`方案数`
2.  给定`某个顺序的抽象运算的方案数`